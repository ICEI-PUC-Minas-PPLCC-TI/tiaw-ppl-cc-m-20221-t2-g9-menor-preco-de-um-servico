<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cadastrar um serviço</title>
    <script>
      addService = function () {
        let formData = new FormData(document.querySelector("form"));
        let service = {};
        service.name = formData.get('servico');
        service.price = formData.get('preco');
        service.enterprise = formData.get('empresa');
        service.notes = formData.get('notas');
        const user = {id: 2, name: "Ciclano do Queijo"};
        service.user = user;

        let stored = localStorage.getItem("services"); 
        if (stored) stored = JSON.parse(stored);
        else stored = [];

        stored.push(service);

        localStorage.setItem("services", JSON.stringify(stored));
        window.location.href = './index.html'
      };
    </script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/water.css@2/out/light.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <nav>
      <ul>
        <li><a href="index.html">Sua lista de serviços</a></li>
      </ul>
    </nav>
    <h1> Cadastrar serviço </h1>
    <form onsubmit="return false;">
      <label for="empresa">Empresa que ofereçe o serviço</label>
      <input
        required
        name="empresa"
        id="empresa"
        placeholder="Netflix, Claro, VIVO, CEMIG..."
      />

      <label for="servico">Serviço</label>
      <input
        required
        name="servico"
        id="servico"
        placeholder="Internet, plano de TV, água, luz..."
      />

      <label for="preco">Preço</label>
      <input
        required
        name="preco"
        id="preco"
        placeholder="Mensal: 30.00, 49.99..."
      />

      <label for="notas">Observações (opcional)</label>
      <textarea
        name="notas"
        id="notas"
        placeholder="Liguei pra o número deles e depois de reclamar bastante deixaram eu diminuir pra esse preço sem perder nada."
      ></textarea>

      <input type="submit" value="Enviar" onclick="addService();" />
    </form>
  </body>
</html>
